
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>create wordcloud with chinese &#8212; wordcloud 1.4.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
    <link rel="stylesheet" href="../_static/main.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.min.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Colored by Group Example" href="colored_by_group.html" />
    <link rel="prev" title="Using custom colors" href="a_new_hope.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Wordcloud</a>
        <span class="navbar-text navbar-version pull-left"><b>1.4.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="index.html">Examples</a></li>
                <li><a href="../references.html">References</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="single_word.html">Single Word</a></li>
<li class="toctree-l1"><a class="reference internal" href="simple.html">Minimal Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="masked.html">Masked wordcloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="frequency.html">Using frequency</a></li>
<li class="toctree-l1"><a class="reference internal" href="colored.html">Image-colored wordcloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="emoji.html">Emoji Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="a_new_hope.html">Using custom colors</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">create wordcloud with chinese</a></li>
<li class="toctree-l1"><a class="reference internal" href="colored_by_group.html">Colored by Group Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../generated/wordcloud.WordCloud.html">wordcloud.WordCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/wordcloud.ImageColorGenerator.html">wordcloud.ImageColorGenerator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/wordcloud.random_color_func.html">wordcloud.random_color_func</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">create wordcloud with chinese</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="a_new_hope.html" title="Previous Chapter: Using custom colors"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Using custom colors</span>
    </a>
  </li>
  <li>
    <a href="colored_by_group.html" title="Next Chapter: Colored by Group Example"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Colored by Gr... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container content-container">
  
  <div class="sphx-glr-download-link-note admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Click <a class="reference internal" href="#sphx-glr-download-auto-examples-wordcloud-cn-py"><span class="std std-ref">here</span></a> to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="create-wordcloud-with-chinese">
<span id="sphx-glr-auto-examples-wordcloud-cn-py"></span><h1>create wordcloud with chinese<a class="headerlink" href="#create-wordcloud-with-chinese" title="Permalink to this headline">¶</a></h1>
<p>Wordcloud is a very good tools, but if you want to create
Chinese wordcloud only wordcloud is not enough. The file
shows how to use wordcloud with Chinese. First, you need a
Chinese word segmentation library jieba, jieba is now the
most elegant the most popular Chinese word segmentation tool in python.
You can use ‘PIP install jieba’. To install it. As you can see,
at the same time using wordcloud with jieba very convenient</p>
<ul class="sphx-glr-horizontal">
<li><img alt="../_images/sphx_glr_wordcloud_cn_001.png" class="sphx-glr-multi-img first" src="../_images/sphx_glr_wordcloud_cn_001.png" />
</li>
<li><img alt="../_images/sphx_glr_wordcloud_cn_002.png" class="sphx-glr-multi-img first" src="../_images/sphx_glr_wordcloud_cn_002.png" />
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jieba</span>
<span class="n">jieba</span><span class="o">.</span><span class="n">enable_parallel</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># Setting up parallel processes :4 ,but unable to run on Windows</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">scipy.misc</span> <span class="kn">import</span> <span class="n">imread</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="c1"># jieba.load_userdict(&quot;txt\userdict.txt&quot;)</span>
<span class="c1"># add userdict by load_userdict()</span>
<span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="View documentation for wordcloud.WordCloud"><span class="n">WordCloud</span></a><span class="p">,</span> <a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="View documentation for wordcloud.ImageColorGenerator"><span class="n">ImageColorGenerator</span></a>

<span class="c1"># get data directory (using getcwd() is needed to support running example in generated IPython notebook)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;__file__&quot;</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span> <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="n">stopwords_path</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/stopwords_cn_en.txt&#39;</span>
<span class="c1"># Chinese fonts must be set</span>
<span class="n">font_path</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/fonts/SourceHanSerif/SourceHanSerifK-Light.otf&#39;</span>

<span class="c1"># the path to save worldcloud</span>
<span class="n">imgname1</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/LuXun.jpg&#39;</span>
<span class="n">imgname2</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/LuXun_colored.jpg&#39;</span>
<span class="c1"># read the mask / color image taken from</span>
<span class="n">back_coloring</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/LuXun_color.jpg&#39;</span><span class="p">))</span>

<span class="c1"># Read the whole text.</span>
<span class="n">text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span> <span class="o">+</span> <span class="s1">&#39;/wc_cn/CalltoArms.txt&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1"># if you want use wordCloud,you need it</span>
<span class="c1"># add userdict by add_word()</span>
<span class="n">userdict_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;阿Ｑ&#39;</span><span class="p">,</span> <span class="s1">&#39;孔乙己&#39;</span><span class="p">,</span> <span class="s1">&#39;单四嫂子&#39;</span><span class="p">]</span>


<span class="c1"># The function for processing text with Jieba</span>
<span class="k">def</span> <span class="nf">jieba_processing_txt</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">userdict_list</span><span class="p">:</span>
        <span class="n">jieba</span><span class="o">.</span><span class="n">add_word</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

    <span class="n">mywordlist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">seg_list</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">cut_all</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">liststr</span> <span class="o">=</span> <span class="s2">&quot;/ &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">seg_list</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">stopwords_path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_stop</span><span class="p">:</span>
        <span class="n">f_stop_text</span> <span class="o">=</span> <span class="n">f_stop</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f_stop_seg_list</span> <span class="o">=</span> <span class="n">f_stop_text</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">myword</span> <span class="ow">in</span> <span class="n">liststr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">myword</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="ow">in</span> <span class="n">f_stop_seg_list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">myword</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">mywordlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myword</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mywordlist</span><span class="p">)</span>


<span class="n">wc</span> <span class="o">=</span> <a href="../generated/wordcloud.WordCloud.html#wordcloud.WordCloud" title="View documentation for wordcloud.WordCloud"><span class="n">WordCloud</span></a><span class="p">(</span><span class="n">font_path</span><span class="o">=</span><span class="n">font_path</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">max_words</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">back_coloring</span><span class="p">,</span>
               <span class="n">max_font_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">860</span><span class="p">,</span> <span class="n">margin</span><span class="o">=</span><span class="mi">2</span><span class="p">,)</span>


<span class="n">wc</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">jieba_processing_txt</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>

<span class="c1"># create coloring from image</span>
<span class="n">image_colors_default</span> <span class="o">=</span> <a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="View documentation for wordcloud.ImageColorGenerator"><span class="n">ImageColorGenerator</span></a><span class="p">(</span><span class="n">back_coloring</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="c1"># recolor wordcloud and show</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wc</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># save wordcloud</span>
<span class="n">wc</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">imgname1</span><span class="p">))</span>

<span class="c1"># create coloring from image</span>
<span class="n">image_colors_byImg</span> <span class="o">=</span> <a href="../generated/wordcloud.ImageColorGenerator.html#wordcloud.ImageColorGenerator" title="View documentation for wordcloud.ImageColorGenerator"><span class="n">ImageColorGenerator</span></a><span class="p">(</span><span class="n">back_coloring</span><span class="p">)</span>

<span class="c1"># show</span>
<span class="c1"># we could also give color_func=image_colors directly in the constructor</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wc</span><span class="o">.</span><span class="n">recolor</span><span class="p">(</span><span class="n">color_func</span><span class="o">=</span><span class="n">image_colors_byImg</span><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">back_coloring</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># save wordcloud</span>
<span class="n">wc</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">imgname2</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Total running time of the script:</strong> ( 0 minutes  11.055 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-wordcloud-cn-py">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/wordcloud_cn.py" download=""><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">wordcloud_cn.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/wordcloud_cn.ipynb" download=""><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">wordcloud_cn.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Andreas Mueller.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>